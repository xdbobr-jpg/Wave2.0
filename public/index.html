<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Wave Messenger</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">

    <!-- Material Symbols -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üåä</text></svg>">

    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Splash Screen -->
    <div id="splash-screen" class="splash-screen">
        <div class="splash-content">
            <div class="splash-logo">
                <span class="material-symbols-rounded">waves</span>
            </div>
            <h1>Wave</h1>
            <p>Connecting people</p>
            <div class="splash-loader"></div>
        </div>
    </div>

    <!-- Login Screen -->
    <div id="login-screen" class="login-screen hidden">
        <div class="login-container">
            <div class="login-header">
                <span class="material-symbols-rounded logo-icon">waves</span>
                <h1>Wave Messenger</h1>
                <p>–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –æ–±—â–µ–Ω–∏–µ</p>
            </div>
            <div class="login-form">
                <div class="input-field">
                    <span class="material-symbols-rounded">person</span>
                    <input type="text" id="login-username" placeholder="–í–∞—à–µ –∏–º—è" maxlength="30">
                </div>
                <div class="avatar-selector">
                    <p>–í—ã–±–µ—Ä–∏—Ç–µ –∞–≤–∞—Ç–∞—Ä</p>
                    <div class="avatar-options" id="avatar-options">
                        <!-- Avatars will be generated by JS -->
                    </div>
                </div>
                <button id="login-btn" class="primary-btn">
                    <span class="material-symbols-rounded">login</span>
                    –í–æ–π—Ç–∏
                </button>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="app" class="app hidden">
        <!-- Navigation Rail (Desktop) -->
        <nav class="nav-rail">
            <div class="nav-rail-top">
                <button class="nav-fab" id="new-chat-btn" title="–ù–æ–≤—ã–π —á–∞—Ç">
                    <span class="material-symbols-rounded">edit_square</span>
                </button>
                <div class="nav-items">
                    <button class="nav-item active" data-view="chats" title="–ß–∞—Ç—ã">
                        <span class="material-symbols-rounded">chat</span>
                        <span class="nav-label">–ß–∞—Ç—ã</span>
                        <span class="badge hidden" id="unread-badge">0</span>
                    </button>
                    <button class="nav-item" data-view="rooms" title="–ö–æ–º–Ω–∞—Ç—ã">
                        <span class="material-symbols-rounded">forum</span>
                        <span class="nav-label">–ö–æ–º–Ω–∞—Ç—ã</span>
                    </button>
                    <button class="nav-item" data-view="contacts" title="–ö–æ–Ω—Ç–∞–∫—Ç—ã">
                        <span class="material-symbols-rounded">contacts</span>
                        <span class="nav-label">–ö–æ–Ω—Ç–∞–∫—Ç—ã</span>
                    </button>
                </div>
            </div>
            <div class="nav-rail-bottom">
                <button class="nav-item" id="settings-btn" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">
                    <span class="material-symbols-rounded">settings</span>
                    <span class="nav-label">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                </button>
            </div>
        </nav>

        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <header class="sidebar-header">
                <div class="header-content">
                    <h1>–ß–∞—Ç—ã</h1>
                    <div class="header-actions">
                        <button class="icon-btn" id="search-toggle-btn" title="–ü–æ–∏—Å–∫">
                            <span class="material-symbols-rounded">search</span>
                        </button>
                        <button class="icon-btn" id="more-btn" title="–ï—â—ë">
                            <span class="material-symbols-rounded">more_vert</span>
                        </button>
                    </div>
                </div>
                <div class="search-bar hidden" id="search-bar">
                    <span class="material-symbols-rounded">search</span>
                    <input type="text" id="search-input" placeholder="–ü–æ–∏—Å–∫ —Å–æ–æ–±—â–µ–Ω–∏–π...">
                    <button class="icon-btn" id="search-close-btn">
                        <span class="material-symbols-rounded">close</span>
                    </button>
                </div>
            </header>

            <!-- Room Tabs -->
            <div class="room-tabs">
                <button class="room-tab active" data-filter="all">–í—Å–µ</button>
                <button class="room-tab" data-filter="unread">–ù–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ</button>
                <button class="room-tab" data-filter="groups">–ì—Ä—É–ø–ø—ã</button>
                <button class="room-tab" data-filter="dm">–õ–∏—á–Ω—ã–µ</button>
            </div>

            <!-- Chat List -->
            <div class="chat-list" id="chat-list">
                <!-- Chats will be rendered here -->
            </div>

            <!-- Online Users -->
            <div class="online-section">
                <div class="online-header">
                    <span class="material-symbols-rounded">group</span>
                    <span>–û–Ω–ª–∞–π–Ω</span>
                    <span class="online-count" id="online-count">0</span>
                </div>
                <div class="online-users" id="online-users">
                    <!-- Online users will be rendered here -->
                </div>
            </div>
        </aside>

        <!-- Main Chat Area -->
        <main class="chat-main" id="chat-main">
            <!-- Empty State -->
            <div class="empty-state" id="empty-state">
                <span class="material-symbols-rounded">chat_bubble</span>
                <h2>–í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Ç</h2>
                <p>–í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Ç –∏–∑ —Å–ø–∏—Å–∫–∞ —Å–ª–µ–≤–∞ –∏–ª–∏ –Ω–∞—á–Ω–∏—Ç–µ –Ω–æ–≤—ã–π —Ä–∞–∑–≥–æ–≤–æ—Ä</p>
            </div>

            <!-- Chat View -->
            <div class="chat-view hidden" id="chat-view">
                <!-- Chat Header -->
                <header class="chat-header" id="chat-header">
                    <button class="icon-btn back-btn" id="back-btn">
                        <span class="material-symbols-rounded">arrow_back</span>
                    </button>
                    <div class="chat-info" id="chat-info">
                        <img src="" alt="" class="chat-avatar" id="chat-avatar">
                        <div class="chat-details">
                            <h2 id="chat-name">–ù–∞–∑–≤–∞–Ω–∏–µ —á–∞—Ç–∞</h2>
                            <p id="chat-status">–æ–Ω–ª–∞–π–Ω</p>
                        </div>
                    </div>
                    <div class="chat-actions">
                        <button class="icon-btn" id="video-call-btn" title="–í–∏–¥–µ–æ–∑–≤–æ–Ω–æ–∫">
                            <span class="material-symbols-rounded">videocam</span>
                        </button>
                        <button class="icon-btn" id="voice-call-btn" title="–ì–æ–ª–æ—Å–æ–≤–æ–π –∑–≤–æ–Ω–æ–∫">
                            <span class="material-symbols-rounded">call</span>
                        </button>
                        <button class="icon-btn" id="chat-search-btn" title="–ü–æ–∏—Å–∫">
                            <span class="material-symbols-rounded">search</span>
                        </button>
                        <button class="icon-btn" id="chat-more-btn" title="–ï—â—ë">
                            <span class="material-symbols-rounded">more_vert</span>
                        </button>
                    </div>
                </header>

                <!-- Pinned Messages Bar -->
                <div class="pinned-bar hidden" id="pinned-bar">
                    <span class="material-symbols-rounded">push_pin</span>
                    <span class="pinned-text" id="pinned-text">–ó–∞–∫—Ä–µ–ø–ª—ë–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ</span>
                    <button class="icon-btn" id="pinned-close">
                        <span class="material-symbols-rounded">close</span>
                    </button>
                </div>

                <!-- Messages Area -->
                <div class="messages-container" id="messages-container">
                    <div class="messages" id="messages">
                        <!-- Messages will be rendered here -->
                    </div>

                    <!-- Scroll to bottom button -->
                    <button class="scroll-bottom-btn hidden" id="scroll-bottom-btn">
                        <span class="material-symbols-rounded">keyboard_arrow_down</span>
                        <span class="new-messages-count hidden" id="new-messages-count">0</span>
                    </button>
                </div>

                <!-- Typing Indicator -->
                <div class="typing-indicator hidden" id="typing-indicator">
                    <div class="typing-dots">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                    <span class="typing-text" id="typing-text">–ø–µ—á–∞—Ç–∞–µ—Ç...</span>
                </div>

                <!-- Reply Preview -->
                <div class="reply-preview hidden" id="reply-preview">
                    <div class="reply-content">
                        <span class="reply-author" id="reply-author">–ò–º—è</span>
                        <span class="reply-text" id="reply-text">–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è</span>
                    </div>
                    <button class="icon-btn" id="reply-cancel">
                        <span class="material-symbols-rounded">close</span>
                    </button>
                </div>

                <!-- Message Input -->
                <footer class="message-input-area" id="message-input-area">
                    <div class="input-container">
                        <button class="icon-btn" id="emoji-btn" title="–≠–º–æ–¥–∑–∏">
                            <span class="material-symbols-rounded">mood</span>
                        </button>
                        <button class="icon-btn" id="attach-btn" title="–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª">
                            <span class="material-symbols-rounded">attach_file</span>
                        </button>
                        <div class="text-input-wrapper">
                            <textarea id="message-input" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ" rows="1"></textarea>
                        </div>
                        <button class="icon-btn" id="voice-btn" title="–ì–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ">
                            <span class="material-symbols-rounded">mic</span>
                        </button>
                        <button class="send-btn hidden" id="send-btn" title="–û—Ç–ø—Ä–∞–≤–∏—Ç—å">
                            <span class="material-symbols-rounded">send</span>
                        </button>
                    </div>
                </footer>
            </div>
        </main>

        <!-- Right Panel (Info) -->
        <aside class="info-panel hidden" id="info-panel">
            <header class="panel-header">
                <button class="icon-btn" id="close-info-btn">
                    <span class="material-symbols-rounded">close</span>
                </button>
                <h2>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
            </header>
            <div class="panel-content">
                <div class="info-avatar">
                    <img src="" alt="" id="info-avatar-img">
                </div>
                <h3 id="info-name">–ù–∞–∑–≤–∞–Ω–∏–µ</h3>
                <p id="info-status">–°—Ç–∞—Ç—É—Å</p>

                <div class="info-section">
                    <h4>–£—á–∞—Å—Ç–Ω–∏–∫–∏</h4>
                    <div class="members-list" id="members-list">
                        <!-- Members will be rendered here -->
                    </div>
                </div>

                <div class="info-section">
                    <h4>–ú–µ–¥–∏–∞</h4>
                    <div class="media-grid" id="media-grid">
                        <!-- Media will be rendered here -->
                    </div>
                </div>

                <div class="info-actions">
                    <button class="action-btn danger" id="leave-chat-btn">
                        <span class="material-symbols-rounded">logout</span>
                        –ü–æ–∫–∏–Ω—É—Ç—å —á–∞—Ç
                    </button>
                </div>
            </div>
        </aside>
    </div>

    <!-- Modals -->
    <!-- Settings Modal -->
    <div class="modal hidden" id="settings-modal">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <header class="modal-header">
                <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
                <button class="icon-btn modal-close">
                    <span class="material-symbols-rounded">close</span>
                </button>
            </header>
            <div class="modal-body">
                <div class="settings-section">
                    <h3>–ü—Ä–æ—Ñ–∏–ª—å</h3>
                    <div class="profile-edit">
                        <div class="avatar-edit">
                            <img src="" alt="" id="settings-avatar">
                            <button class="avatar-edit-btn" id="change-avatar-btn">
                                <span class="material-symbols-rounded">photo_camera</span>
                            </button>
                        </div>
                        <div class="input-field">
                            <label>–ò–º—è</label>
                            <input type="text" id="settings-name" maxlength="30">
                        </div>
                        <div class="input-field">
                            <label>–°—Ç–∞—Ç—É—Å</label>
                            <input type="text" id="settings-status" placeholder="–í–∞—à —Å—Ç–∞—Ç—É—Å" maxlength="100">
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>–¢–µ–º–∞</h3>
                    <div class="theme-options">
                        <button class="theme-option active" data-theme="light">
                            <span class="material-symbols-rounded">light_mode</span>
                            –°–≤–µ—Ç–ª–∞—è
                        </button>
                        <button class="theme-option" data-theme="dark">
                            <span class="material-symbols-rounded">dark_mode</span>
                            –¢—ë–º–Ω–∞—è
                        </button>
                        <button class="theme-option" data-theme="system">
                            <span class="material-symbols-rounded">contrast</span>
                            –°–∏—Å—Ç–µ–º–Ω–∞—è
                        </button>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>–¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞</h3>
                    <div class="color-options" id="color-options">
                        <button class="color-option active" data-color="purple" style="--color: #6750A4"></button>
                        <button class="color-option" data-color="blue" style="--color: #0061A4"></button>
                        <button class="color-option" data-color="green" style="--color: #386A20"></button>
                        <button class="color-option" data-color="orange" style="--color: #8B5000"></button>
                        <button class="color-option" data-color="pink" style="--color: #984061"></button>
                        <button class="color-option" data-color="teal" style="--color: #006A6A"></button>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h3>
                    <div class="toggle-option">
                        <span>–ó–≤—É–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π</span>
                        <label class="toggle">
                            <input type="checkbox" id="notification-sound" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                    <div class="toggle-option">
                        <span>–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–µ–≤—å—é</span>
                        <label class="toggle">
                            <input type="checkbox" id="notification-preview" checked>
                            <span class="toggle-slider"></span>
                        </label>
                    </div>
                </div>
            </div>
            <footer class="modal-footer">
                <button class="text-btn modal-close">–û—Ç–º–µ–Ω–∞</button>
                <button class="primary-btn" id="save-settings-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </footer>
        </div>
    </div>

    <!-- New Chat Modal -->
    <div class="modal hidden" id="new-chat-modal">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <header class="modal-header">
                <h2>–ù–æ–≤—ã–π —á–∞—Ç</h2>
                <button class="icon-btn modal-close">
                    <span class="material-symbols-rounded">close</span>
                </button>
            </header>
            <div class="modal-body">
                <div class="new-chat-options">
                    <button class="new-chat-option" id="create-group-btn">
                        <span class="material-symbols-rounded">group_add</span>
                        <div>
                            <h4>–°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É</h4>
                            <p>–°–æ–∑–¥–∞–π—Ç–µ –≥—Ä—É–ø–ø–æ–≤–æ–π —á–∞—Ç</p>
                        </div>
                    </button>
                    <button class="new-chat-option" id="create-room-btn">
                        <span class="material-symbols-rounded">forum</span>
                        <div>
                            <h4>–°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É</h4>
                            <p>–ü—É–±–ª–∏—á–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞ –¥–ª—è –≤—Å–µ—Ö</p>
                        </div>
                    </button>
                </div>
                <div class="divider">
                    <span>–∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</span>
                </div>
                <div class="input-field">
                    <span class="material-symbols-rounded">search</span>
                    <input type="text" id="user-search" placeholder="–ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π...">
                </div>
                <div class="users-list" id="users-list">
                    <!-- Users will be rendered here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Create Room Modal -->
    <div class="modal hidden" id="create-room-modal">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <header class="modal-header">
                <h2>–°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É</h2>
                <button class="icon-btn modal-close">
                    <span class="material-symbols-rounded">close</span>
                </button>
            </header>
            <div class="modal-body">
                <div class="input-field">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã</label>
                    <input type="text" id="room-name-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ" maxlength="50">
                </div>
                <div class="input-field">
                    <label>–¢–∏–ø –∫–æ–º–Ω–∞—Ç—ã</label>
                    <div class="radio-options">
                        <label class="radio-option">
                            <input type="radio" name="room-type" value="public" checked>
                            <span class="radio-mark"></span>
                            <span class="material-symbols-rounded">public</span>
                            –ü—É–±–ª–∏—á–Ω–∞—è
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="room-type" value="private">
                            <span class="radio-mark"></span>
                            <span class="material-symbols-rounded">lock</span>
                            –ü—Ä–∏–≤–∞—Ç–Ω–∞—è
                        </label>
                    </div>
                </div>
            </div>
            <footer class="modal-footer">
                <button class="text-btn modal-close">–û—Ç–º–µ–Ω–∞</button>
                <button class="primary-btn" id="create-room-submit">–°–æ–∑–¥–∞—Ç—å</button>
            </footer>
        </div>
    </div>

    <!-- Emoji Picker -->
    <div class="emoji-picker hidden" id="emoji-picker">
        <div class="emoji-search">
            <input type="text" placeholder="–ü–æ–∏—Å–∫ —ç–º–æ–¥–∑–∏..." id="emoji-search-input">
        </div>
        <div class="emoji-categories">
            <button class="emoji-category active" data-category="smileys">üòÄ</button>
            <button class="emoji-category" data-category="people">üëã</button>
            <button class="emoji-category" data-category="animals">üê±</button>
            <button class="emoji-category" data-category="food">üçï</button>
            <button class="emoji-category" data-category="activities">‚öΩ</button>
            <button class="emoji-category" data-category="travel">üöó</button>
            <button class="emoji-category" data-category="objects">üí°</button>
            <button class="emoji-category" data-category="symbols">‚ù§Ô∏è</button>
        </div>
        <div class="emoji-grid" id="emoji-grid">
            <!-- Emojis will be rendered here -->
        </div>
    </div>

    <!-- Context Menu -->
    <div class="context-menu hidden" id="context-menu">
        <button class="context-item" data-action="reply">
            <span class="material-symbols-rounded">reply</span>
            –û—Ç–≤–µ—Ç–∏—Ç—å
        </button>
        <button class="context-item" data-action="edit">
            <span class="material-symbols-rounded">edit</span>
            –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
        </button>
        <button class="context-item" data-action="copy">
            <span class="material-symbols-rounded">content_copy</span>
            –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
        </button>
        <button class="context-item" data-action="pin">
            <span class="material-symbols-rounded">push_pin</span>
            –ó–∞–∫—Ä–µ–ø–∏—Ç—å
        </button>
        <button class="context-item" data-action="forward">
            <span class="material-symbols-rounded">forward</span>
            –ü–µ—Ä–µ—Å–ª–∞—Ç—å
        </button>
        <div class="context-divider"></div>
        <button class="context-item danger" data-action="delete">
            <span class="material-symbols-rounded">delete</span>
            –£–¥–∞–ª–∏—Ç—å
        </button>
    </div>

    <!-- Reaction Picker -->
    <div class="reaction-picker hidden" id="reaction-picker">
        <button class="reaction-btn" data-emoji="üëç">üëç</button>
        <button class="reaction-btn" data-emoji="‚ù§Ô∏è">‚ù§Ô∏è</button>
        <button class="reaction-btn" data-emoji="üòÇ">üòÇ</button>
        <button class="reaction-btn" data-emoji="üòÆ">üòÆ</button>
        <button class="reaction-btn" data-emoji="üò¢">üò¢</button>
        <button class="reaction-btn" data-emoji="üî•">üî•</button>
        <button class="reaction-btn add-reaction" id="add-reaction-btn">
            <span class="material-symbols-rounded">add</span>
        </button>
    </div>

    <!-- File Preview Modal -->
    <div class="modal hidden" id="file-preview-modal">
        <div class="modal-backdrop"></div>
        <div class="file-preview-content">
            <button class="icon-btn close-preview" id="close-preview">
                <span class="material-symbols-rounded">close</span>
            </button>
            <div class="preview-container" id="preview-container">
                <!-- Preview content will be rendered here -->
            </div>
            <div class="preview-info">
                <span id="preview-filename">filename.jpg</span>
                <a href="#" id="preview-download" download>
                    <span class="material-symbols-rounded">download</span> –°–∫–∞—á–∞—Ç—å
                </a>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Hidden file input -->
    <input type="file" id="file-input" hidden multiple>
    <input type="file" id="avatar-input" hidden accept="image/*">

    <!-- Scripts -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js"></script>
</body>

</html>